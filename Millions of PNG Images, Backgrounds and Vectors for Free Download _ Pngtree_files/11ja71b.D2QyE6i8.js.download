import"./bygoogle.Cu_TzzO6.js";import"./prf-down.QPMZecpT.js";import{m as b,l as _,o as h,u as H,n as q,r as m,E as l,c as P,w as R,k as I,x as K,q as z}from"./index.od_68XAP.js";import{d as A,b as C,h as d,a as F}from"./hue.DWDJJfDn.js";import{a2 as x}from"./reactivity.esm-bundler.CpIYKLjU.js";import{r as M,a as V}from"./recaptcha.ziH8Z-Od.js";import"./nav.9sGX4va4.js";import"./11ja71b.CmVpIyaP.js";import"./client.Bq-QWiK7.js";import"./client.BawyhQcd.js";import"./usePosition.BgcbIBDN.js";import"./index.CEH2_BaS.js";import"./core.Cez-66Ii.js";function O(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}O.g=e}__DATA__.isTestEnv&&(window.__HUE_BASE64__={encode:C,decode:A});const B=()=>{const e=new Date,t=new Date(e);return t.setUTCHours(0,0,0,0),e>=t&&t.setUTCDate(t.getUTCDate()+1),t.getTime()-e.getTime()};function G(e){const t="freedn_count",o=t+e;i.free?(b(t,_(t,0)+1),b(o,_(o,0)+1,B())):(h(t),h(o))}function Q(){const e=E(),t=_(e,null);if(Y(e),t){const o=t.data.downUrl;o&&(t.data.downUrl=J(o))}return t}function W(e){const t=E();if(!e)return h(t);e.data={...e.data,downUrl:X(e.data.downUrl)},b(t,e,H(.5))}function J(e){if(!e)return e;try{return A(e)}catch(t){return e}}function X(e){if(!e)return e;try{return C(e)}catch(t){return e}}function E(){const{id:e,task_id:t,type:o,t:s}=i,a=__DATA__.uid,f=t?"-"+t:"";return"d_".concat(e+f,"_").concat(o,"_").concat(s,"**").concat(a)}function Y(e){const t="**"+__DATA__.uid,o=Object.keys(window.localStorage).filter(a=>a!==e&&a.endsWith(t)&&a.indexOf("_",2)>0).filter(a=>a.indexOf("__")==0?(h(a),!1):a.indexOf("d_")==0),s=o.length>=14;for(const a of o)s?h(a):_(a)}const i=window._getDownData(),Z=(i.delay||3)*1e3,n=x({spin:!1,usrTap:!1,status:null,data:{},share:{},second:i.second||10,whatThisOpen:!1}),S={g_token:"",errData:{}};function ee(){const e=Q();if(e)return L(e),d("down-from-cache"),!0}function L(e,t){Object.assign(n.data,e.data),Object.assign(n.share,e.share),oe(),ne(e.data.downUrl)}const $="beforeunload";function te(e){window.addEventListener($,j),e&&e.focus()}function U(e){e==="ok"&&window.removeEventListener($,j)}function j(e){if(n.spin){const t="Reload ?";return e.preventDefault(),e.returnValue=t,d("down-"+$),t}}function oe(){let t=n.second;const o=q(()=>{n.second=t,t--,t<0&&(n.second=0,o())},1e3)}function ne(e,t){const o=e.includes("ingramapi.com"),s=()=>{ae(e),o||setTimeout(()=>{n.status="ok"},5e3),n.spin=!1};i.free?setTimeout(s,Z):s()}function ae(e){const t=document.createElement("a");t.className="_zzqtmz _bdjirm",t.href=e,t.download="",document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t)},100)}function w(){m.get("/api/statistics/down-limit")}function se(e,t){var c,g;const o=_("search_keyword",[]),s=(u,k)=>{for(let p=0;p<k.length;p++)if(u==k[p])return!0;return!1};let a="",f="";for(const u of o)if(u.type==t&&s(e,u.id||[])){a=(c=u.keyword)!=null?c:"",f=(g=u.result)!=null?g:"";break}a!=""&&f!=""&&F({search_keyword:a,search_result:f,search_type:t,search:0,down_id:e})}const N=()=>{n.spin=!1,$toast==null||$toast.error("Google recaptcha failed to load!")},D=()=>{if(n.spin||!$app.checkIsLogin()||(c=>!isNaN(c)&&c<=0)(+i.id)||(n.spin=!0,ee()))return;const{verify:t,alert:o,t:s}=i,a=c=>{o!=1&&o!=2?v(c):n.spin=!1};t==1?M({g_sitekey:__DATA__.sitekey_v3,action:"down_"+s}).then(c=>{S.g_token=c,a(c)}).catch(N):t==5?(l.emit("_1ksffsj",{reject(){i.verify=1,n.spin=!1,D()},ok(c){v(c,"v5")}}),d("couponbig-down-img-code")):a(),d({1:"down-attribuateshow",2:"down-shareshow"}[o])};let y=null;function v(e,t){const{id:o,task_id:s,type:a,t:f,copy:c,token:g,time:u}=i,k=new URLSearchParams(location.search),p={id:o,task_id:s||void 0,type:a,t:f,cp:c,token:g,time:u,down_file_code:e||void 0,code_version:e&&t||void 0,slidesdocs:k.get("slidesdocs")||void 0};T(p),y=()=>T(p)}function T(e){m.post("/api/down/down-file?r="+Math.random(),e).then(re).catch(t=>{t=t||{},Object.assign(S.errData,e),n.status="err",n.spin=!1,$toast==null||$toast.error(i.errInfo),m.get("/api/down/log-trace-err",{u:{status:t.status,readyState:t.readyState,responseText:t.responseText,textStatus:t.statusText,errorThrown:""}})})}function re(e){const{id:t,t:o,type:s}=i;switch(e.prf&&y&&l.emit("prf:down",y),y=null,n.spin=!1,e.status){case 200:L(e),G(o),W({data:e.data,share:e.share}),se(t,o),m.get("/api/statistics/down-statis",{id:t,type:s,t:o,vip_type:__DATA__.vipType});break;case 304:V({g_sitekey:e.v2}).then(a=>{v(a,"v2")}).catch(N);break;case 404:d("down-data404"),$toast==null||$toast.error(e.info,0);break;case-1:l.emit("_amemn8","max",{type:o+""}),d("down-maxalert");break;case-2:d("down-fillinfo");break;case-3:d("down-giftmaxalert");break;case-4:l.emit("_amemn8","daily",{type:o+""}),m.post("/api/user/free-cookie",{operate:1,value:"alert-daily-gift"});break;case-5:l.emit("_pri6n4");break;case-6:$toast==null||$toast.error(e.info,0);break;case-7:case-8:case-9:l.emit("_amemn8","ip",{ipCode:e.status,type:o+""}),w();break;case 1:l.emit("_amemn8","plans",{type:o+""}),w();break;case 3:case 4:alert("Please click verification"),location.reload();break;case 7:l.emit("_amemn8","tpl",{type:o+""}),w(),d("down-nofree");break;case 8:l.emit("_amemn8","plans",{type:o+""}),w(),d("down-rarlimit");break;case 9:l.emit("_amemn8","enterprise",{type:o+""}),w(),d("down-enterprise-limit");break}}function ie(e){const t=n.share;if(e==="copy"){const o=t.copy;o&&P(o).then(()=>{$toast==null||$toast.success(__DATA__.copyTips)}).catch(s=>{})}else{let o,s;e==="pin"?(o=t.pin,s={width:1034,height:820}):e==="fb"?o=t.facebook:e==="tt"&&(o=t.twt),o&&R(o,"share-"+e,s)}}const ce={username:"",email:"",topic:"",message:""},r=x({open:!1,loading:!1,...ce,err:""});function de(e){if(!r.loading){if(!r.username.trim()){r.err="username",$toast==null||$toast.error(e.username);return}if(!I(r.email)){r.err="email",$toast==null||$toast.error(e.email);return}if(r.topic===""){r.err="topic",$toast==null||$toast.error(e.topic);return}if(r.message.trim().length<15){r.err="message",$toast==null||$toast.error(e.message);return}r.err="",r.loading=!0,m.post("/api/work-order/contact-us",{id:i.id,type:i.t,username:r.username,email:r.email,topic:r.topic,message:r.message,feedback_url:location.href,down_limit:"1"}).then(t=>{r.loading=!1,t.status===200?(r.open=!1,$toast==null||$toast.success("Successful!")):$toast==null||$toast.error(t.info)}).catch(()=>{r.loading=!1,$toast==null||$toast.error("Error!")})}}K("_hz3vri",()=>{const e="_1vb6prl _1i3kt2s";let t=!1;return{store:n,feedback:r,get vipTitCls(){return n.usrTap?"":e},get clickHereCls(){return n.status===null?e:""},get spinCls(){return n.spin?"_1tsj2ix":""},"on:mounted"(){if(document.querySelector("._1rtuhfs")){this.$app.dialog="device-limit",t=!0;return}te(this.$refs.loadIpt),this.$watch(()=>n.status,U),this.$watch(()=>r.topic,s=>{s!==""&&r.err==="topic"&&(r.err="")}),i.autoload&&i.flag==1&&D();let o=!1;return l.on("prf:down",s=>{if(o)return;const a=this._Refs.prfDown,f=()=>{o=!1};o=!0,a.onshow({onDownPrf:s,...a.getName(i.one),slidesdocs:location.search.includes("slidesdocs=1"),data:{action:"down",id:i.id,type:i.t},resolve:f,reject:f}),d("down-prfdown-btn"+(__DATA__.enterpriseStatus==1?"team":""))})},"on:unmounted"(){U("ok")},clickDownNow(){t||(n.usrTap=!0,D())},clickHere(){t||(n.spin||!n.data.downUrl&&n.status==="err"&&(n.spin=!0,T({...S.errData})),d("down-clickhere"))},onShare(o){ie(o)},onDownLink(o,s){o==="rm_bg"&&(s.preventDefault(),z("rbg_id_type","".concat(i.id,"_").concat(i.t),{domain:".pngtree.com",expires:1}),window.open("/remove-background","_blank"))},downPrf(){l.emit("prf:down")},onFeedback(o){r.open=o},feedbackErrCls(o){return r.err===o?"_feqbc0":""},feedbackSubmit(o){de(o||{})}}});export{O as __vite_legacy_guard};
